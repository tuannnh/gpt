{"version":3,"file":"6857.7d1d9bb7872b34af06fe.js","mappings":"0JAMO,MAAMA,EAAcC,KAAKC,IAAIC,UAAUC,qBAAuB,EAAG,GAExE,IAAIC,EAKW,SAASC,IACtB,OAAKC,EAAAA,IACAF,IACHA,EAAY,IAAIG,MAAMR,GAAaS,UAAKC,GAAWC,KACjD,KACE,MAAMC,EAAS,IAAIC,OAAO,IAAIC,IAAI,oBAElC,MAAO,CAAEF,SAAQG,WADCC,EAAAA,EAAAA,GAAgCJ,GACtB,KAK3BP,GAXiC,EAY1C,C","sources":["webpack://telegram-t/./src/util/launchMediaWorkers.ts"],"sourcesContent":["import type { MediaWorkerApi } from '../lib/mediaWorker/index.worker';\nimport type { Connector } from './PostMessageConnector';\n\nimport { IS_VIDEO_PREVIEW_SUPPORTED } from './windowEnvironment';\nimport { createConnector } from './PostMessageConnector';\n\nexport const MAX_WORKERS = Math.min(navigator.hardwareConcurrency || 4, 4);\n\nlet instances: {\n  worker: Worker;\n  connector: Connector<MediaWorkerApi>;\n}[] | undefined;\n\nexport default function launchMediaWorkers() {\n  if (!IS_VIDEO_PREVIEW_SUPPORTED) return [];\n  if (!instances) {\n    instances = new Array(MAX_WORKERS).fill(undefined).map(\n      () => {\n        const worker = new Worker(new URL('../lib/mediaWorker/index.worker.ts', import.meta.url));\n        const connector = createConnector<MediaWorkerApi>(worker);\n        return { worker, connector };\n      },\n    );\n  }\n\n  return instances;\n}\n"],"names":["MAX_WORKERS","Math","min","navigator","hardwareConcurrency","instances","launchMediaWorkers","IS_VIDEO_PREVIEW_SUPPORTED","Array","fill","undefined","map","worker","Worker","URL","connector","createConnector"],"sourceRoot":""}